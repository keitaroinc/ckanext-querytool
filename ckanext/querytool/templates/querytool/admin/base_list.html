{% extends "querytool/admin/base.html" %}
{% set ctrl = 'ckanext.querytool.controllers.querytool:QueryToolController' %}

{% block subtitle %}{{ _('Queries') }}{% endblock %}


{% block breadcrumb_content %}
  <li>{% link_for _('Application Groups'), controller=ctrl, action='groups' %}</li>

  {% if c.group %}
    <li class="active">{% link_for c.group, controller=ctrl, action='list_by_group', group=c.group %}</li>
  {% else %}
    <li class="active">{% link_for _('Other'), controller=ctrl, action='list_other' %}</li>
  {% endif %}


{% endblock %}

{% block page_header %}
{% endblock %}

{% block page_primary_action %}
  {% if h.check_access('querytool_update') %}
    {% link_for _('Add New Application'), controller=ctrl, action='querytool_edit', querytool='', class_='btn btn-primary', icon='plus-square' %}
  {% endif %}
{% endblock %}


{% block primary_content_inner %}

{% if data %}
  {% for querytool in data %}
    {% if querytool.type == 'main' %}
    <legend>{{ _('Main') }}</legend>
      {% snippet 'querytool/admin/snippets/query_tools.html', querytool=querytool %}
    {% endif %}

    {% if querytool.type == 'related' %}
    <legend>{{ _('Related') }}</legend>
    {% snippet 'querytool/admin/snippets/query_tools.html', querytool=querytool %}
  {% endif %}
  {% endfor%}
{% else %}
<div class="alert alert-danger">
    <strong>{{ _('There are no query tools created') }}</strong>
 </div>
{% endif %}
{% endblock %}
